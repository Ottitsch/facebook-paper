# RAG Baseline Reproduction - Requirements
# Python 3.11 REQUIRED (NOT 3.13 - incompatible with pyarrow)

# ============================================================================
# CRITICAL: Dataset loading dependencies
# ============================================================================
# These EXACT versions are required for loading Natural Questions and wiki_dpr
datasets==2.14.0       # MUST be 2.14.0 (2.20.0 has LocalFileSystem bugs)
pyarrow==13.0.0        # MUST be 13.0.0 (14.x+ breaks datasets 2.14.0)
numpy<2.0.0            # Required for pyarrow 13.x compatibility
fsspec==2024.5.0       # File system operations

# ============================================================================
# Core ML frameworks
# ============================================================================
torch>=2.0.0           # PyTorch with CUDA support
transformers>=4.35.0   # HuggingFace transformers (RAG models)
faiss-cpu>=1.7.4       # Vector similarity search
sentencepiece>=0.1.99  # Tokenization

# ============================================================================
# Model optimization
# ============================================================================
bitsandbytes>=0.41.0   # 4-bit quantization (for Flan-T5-large)
accelerate>=0.24.0     # Distributed training/inference

# ============================================================================
# Data handling & utilities
# ============================================================================
pandas>=2.0.0          # Data manipulation
huggingface_hub>=0.19.0  # Download datasets from HF Hub
requests>=2.31.0       # HTTP requests for manual downloads

# ============================================================================
# Evaluation & metrics
# ============================================================================
scikit-learn>=1.3.0    # Metrics computation
tqdm>=4.65.0           # Progress bars

# ============================================================================
# Visualization & experiment tracking
# ============================================================================
matplotlib>=3.7.0      # Plotting
seaborn>=0.12.0        # Statistical visualizations
wandb>=0.15.0          # Experiment tracking (optional)

# ============================================================================
# INSTALLATION NOTES
# ============================================================================
# 1. Create Python 3.11 environment:
#    py -3.11 -m venv venv311
#
# 2. Activate environment:
#    venv311\Scripts\activate  (Windows)
#    source venv311/bin/activate  (Linux/Mac)
#
# 3. Install PyTorch with CUDA (if you have GPU):
#    pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
#
# 4. Install all requirements:
#    pip install -r requirements.txt
#
# 5. Verify pyarrow version (CRITICAL):
#    python -c "import pyarrow; print(pyarrow.__version__)"
#    Should output: 13.0.0
#
# ============================================================================
# TROUBLESHOOTING
# ============================================================================
# If you see: "module 'pyarrow' has no attribute 'PyExtensionType'"
# → Run: pip install pyarrow==13.0.0
#
# If you see: "NotImplementedError: Loading a dataset cached in a LocalFileSystem"
# → You have wrong datasets version. Run: pip install datasets==2.14.0
#
# If you see numpy compatibility errors:
# → Run: pip install "numpy<2.0.0"
